const CACHE="snake-quiz-cache-v3",BASE_PATH=new URL(".",self.registration.scope).pathname,PRECACHE_ASSETS=[`${BASE_PATH}icon.svg`,`${BASE_PATH}manifest.webmanifest`];self.addEventListener("install",e=>{e.waitUntil(caches.open(CACHE).then(e=>e.addAll(PRECACHE_ASSETS)).then(()=>self.skipWaiting()))}),self.addEventListener("activate",e=>{e.waitUntil(caches.keys().then(e=>Promise.all(e.filter(e=>e!==CACHE).map(e=>caches.delete(e)))).then(()=>self.clients.claim()))}),self.addEventListener("fetch",e=>{if("GET"!==e.request.method)return;const{request:t}=e;"navigate"!==t.mode?e.respondWith(caches.match(t).then(e=>e||fetch(t))):e.respondWith(fetch(t).then(e=>{const n=e.clone();return caches.open(CACHE).then(e=>e.put(t,n)),e}).catch(async()=>await caches.match(t)||caches.match(`${BASE_PATH}index.html`)))});